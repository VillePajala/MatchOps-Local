# Layer 2 â€” Step 2.8: Modal Architecture Cleanup

**Status**: ðŸ”´ **NOT STARTED**
**Priority**: ðŸŸ¢ **LOW** â€” 3/10 severity, cleanup task
**Estimated Effort**: 2-3 hours (1 PR)
**Prerequisites**: Step 2.7 âœ… Complete

---

## Revised Assessment

After detailed code review, the original assessment was **incorrect**.

### What We Found

**The 76-parameter interface looks scary but:**

1. `ModalManagerProps` is already well-organized: `{ state, data, handlers }`
2. Individual modals receive clean, focused props
3. The "smell" is internal plumbing, not exposed API

**ModalManager interface (what reviewers see):**
```typescript
export interface ModalManagerProps {
  state: ModalManagerState;      // 19 boolean flags
  data: ModalManagerData;        // ~25 data items, grouped logically
  handlers: ModalManagerHandlers; // ~50 callbacks, organized
}
```

This is **good design**. The 76 params are internal implementation detail.

### Severity Reassessment

| Original Assessment | Revised Assessment |
|---------------------|-------------------|
| 8/10 severity | 3/10 severity |
| "God Object anti-pattern" | Pass-through aggregation layer |
| Portfolio red flag | Minor inefficiency |
| 20-27 hours, 8 PRs | 2-3 hours, 1 PR |

---

## What The Fix Actually Is

**Problem:** `useModalOrchestration` is a pass-through layer that:
- Receives 76 params from `useGameOrchestration`
- Adds 3 local useStates
- Creates a few toggle handlers
- Reassembles everything into `modalManagerProps`

**Solution:** Delete `useModalOrchestration`, build `modalManagerProps` directly in `useGameOrchestration`.

**Result:**
- Delete 581 lines
- Remove unnecessary indirection
- Same functionality, cleaner code

---

## Simple Fix (If Desired)

### Single PR: Remove useModalOrchestration

**Branch**: `refactor/2.8-simplify-modal-orchestration`

**Changes:**
1. Move `modalManagerProps` construction into `useGameOrchestration`
2. Move 3 local useStates (`isInstructionsModalOpen`, etc.) to `useGameOrchestration`
3. Delete `useModalOrchestration.ts`
4. Update imports

**Files:**
- Delete: `src/components/HomePage/hooks/useModalOrchestration.ts` (581 lines)
- Modify: `src/components/HomePage/hooks/useGameOrchestration.ts` (add ~150 lines)
- Update: Test files

**Net result:** -400 lines, one less abstraction layer

**Verification:**
- [ ] All modals work
- [ ] Tests pass
- [ ] Build succeeds

---

## Implementation Plan

### Single PR: Remove useModalOrchestration

**Branch**: `refactor/2.8-simplify-modal-orchestration`

**Steps:**
1. Move 3 local useStates to `useGameOrchestration`:
   - `isInstructionsModalOpen`
   - `isPersonnelManagerOpen`
   - `isTeamManagerOpen`

2. Move toggle handlers to `useGameOrchestration`:
   - `handleToggleTrainingResources`
   - `handleToggleInstructionsModal`
   - `handleCloseTeamManagerModal`
   - etc.

3. Build `modalManagerProps` directly in `useGameOrchestration`

4. Delete `useModalOrchestration.ts` (581 lines)

5. Update/delete test file `useModalOrchestration.test.ts`

**Verification:**
- [ ] All modals open/close correctly
- [ ] All 2,025+ tests pass
- [ ] Build succeeds
- [ ] Lint passes

---

**Created**: 2025-12-04
**Revised**: 2025-12-04 (Downgraded from 8/10 to 3/10 severity after code review)
**Document Owner**: Development Team
